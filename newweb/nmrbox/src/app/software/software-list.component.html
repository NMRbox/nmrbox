<div class="section-banner section-banner-software"></div>
<div class="section-banner-bg gray-bg"></div>
<div class="sw-filters-container">
  <div class="sw-filters">

    <mat-form-field>
      <mat-select
        *ngIf='researchProblems'
        [(ngModel)]="activeResearchProblem"
        placeholder="Research problem">
        <mat-option
          (click)="filterSelections()"
          [value]='null'>Show all
        </mat-option>
        <mat-option
          (click)="filterSelections()"
          *ngFor="let type_id of objectKeys(researchProblems)"
          [value]="type_id"
          (click)="filterSelections()">{{researchProblems[type_id]}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-select
        *ngIf='softwareTypes'
        placeholder="Software type"
        [(ngModel)]="activeSoftwareType">
        <mat-option
          (click)="filterSelections()"
          [value]='null'>Show all
        </mat-option>
        <mat-option
          *ngFor="let type_id of objectKeys(softwareTypes)"
          [value]="type_id"
          (click)="filterSelections()">{{softwareTypes[type_id]}}
        </mat-option>
      </mat-select>
    </mat-form-field>


    <a id="all-software"
       (click)="activeResearchProblem=null;activeSoftwareType=null;getSoftwareList(); $event.stopPropagation(); onSelect(null)">All
      Software</a>
    <mat-form-field id="search">
      <input matInput #searchBox id="search-box" (keyup)="searchSoftware(searchBox.value)"
             placeholder="search software"/>
      <span class="icon-search"></span>
    </mat-form-field>
  </div>

  <div id="software-types-menu" class="sw-menu-wrapper my-fader" [swFiltersOpen]="!swFiltersOpen">
    <swiper [config]="config">
      <div class="swiper-wrapper">
        <div *ngFor="let swt of swtList" class="swiper-slide" [class.selected]="swt.name === filterName">
          <a id="{{swt.id}}" class="sw-type-icon-med sw-type-icon-{{swt.name}}"
             (click)="filterSoftwareType(swt.name, 'swt'); $event.stopPropagation(); onSelect(swt)"></a>
        </div>
      </div>
      <div class="swiper-button-next arrow-right swiper-button-white"></div>
      <div class="swiper-button-prev arrow-left swiper-button-white"></div>
    </swiper>
  </div>
</div>

<!-- info alert box
<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1 alert alert-info">
      <a href="#" class="close" data-dismiss="alert">&times;</a>
      <p class="text-info">Filtered searching by Research Problem and Software Type coming soon.
        Search box currently supports filtering by software title.</p>
    </div>
  </div>
</div>-->

<!-- Software registry listings -->
<mat-grid-list class="software-list" cols="3" rowHeight="250px">
  <mat-grid-tile class="tile-dashed" *ngFor="let software of filteredList"
                 (click)="gotoDetail(software); $event.stopPropagation()">
    <mat-card class="sw-card">
      <mat-card-header>
        <mat-card-title>{{software.short_title}}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>
          {{software.synopsis}}
        </p>
      </mat-card-content>
      <ul class="icon-list">
        <li *ngFor="let type of software.software_types" class="sw-type-icon-small sw-type-icon-{{type}}"></li>
      </ul>
    </mat-card>
  </mat-grid-tile>
</mat-grid-list>
