<div class="section-banner section-banner-software"></div>
<div class="section-banner-bg gray-bg"></div>
<div class="sw-filters-container">
  <div class="sw-filters">

    <mat-form-field>
      <mat-select
        *ngIf='researchProblems'
        [(ngModel)]="activeResearchProblem"
        placeholder="Research problem">
        <mat-option
          (click)="filterSelections()"
          [value]='null'>Show all
        </mat-option>
        <!--
        <mat-option
          *ngFor="let type_id of objectKeys(researchProblems)"
          [value]="type_id"
          (click)="filterSelections()">{{researchProblems[type_id]}}
        </mat-option>-->

        <mat-option
          value="option1"
          (click)="filterSelections()">
          <a class="rp-icon-large rp-icon-metabolomics"></a>Metabolomics
        </mat-option>
        <mat-option
          value="2"
          (click)="filterSelections()">c
          <a class="rp-icon-large rp-icon-protein-dynamics"></a>Protein Dynamics
        </mat-option>
        <mat-option
          value="3"
          (click)="filterSelections()">
          <a class="rp-icon-large rp-icon-protein-structure"></a>Protein Structure
        </mat-option>
        <mat-option
          value="4"
          (click)="filterSelections()">
          <a class="rp-icon-large rp-icon-intrinsically"></a>Intrinsically Disordered Proteins
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-select
        *ngIf='softwareTypes'
        placeholder="Software type"
        [(ngModel)]="activeSoftwareType">
        <mat-option
          (click)="filterSelections()"
          [value]='null'>Show all
        </mat-option>
        <mat-option
          *ngFor="let type_id of objectKeys(softwareTypes)"
          [value]="type_id"
          (click)="filterSelections()">{{softwareTypes[type_id]}}
        </mat-option>
      </mat-select>
    </mat-form-field>


    <a id="all-software"
       (click)="resetSelections(); getSoftwareList(); $event.stopPropagation();">All
      Software</a>
    <mat-form-field id="search">
      <input matInput #searchBox
             type="search"
             id="search-box"
             [(ngModel)]="activeNameSearch"
             (keyup)="filterSelections()"
             placeholder="Search software"/>
      <span class="icon-search"></span>
    </mat-form-field>
  </div>

  <div id="software-types-menu" class="sw-menu-wrapper my-fader" [swFiltersOpen]="!swFiltersOpen">
    <swiper [config]="config">
      <div class="swiper-wrapper">
        <div *ngFor="let swt of swtList" class="swiper-slide" [class.selected]="swt.name === filterName">
          <a id="{{swt.id}}" class="sw-type-icon-med sw-type-icon-{{swt.name}}"
             (click)="filterSoftwareType(swt.name, 'swt'); $event.stopPropagation();"></a>
        </div>
      </div>
      <div class="swiper-button-next arrow-right swiper-button-white"></div>
      <div class="swiper-button-prev arrow-left swiper-button-white"></div>
    </swiper>
  </div>
</div>

<!-- Software registry listings -->
<mat-grid-list class="software-list" cols="3" rowHeight="250px">
  <mat-grid-tile class="tile-dashed" *ngFor="let software of filteredList"
                 (click)="gotoDetail(software); $event.stopPropagation()">
    <mat-card class="sw-card">
      <mat-card-header>
        <mat-card-title>{{software.short_title}}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>
          {{software.synopsis}}
        </p>
      </mat-card-content>
      <ul class="icon-list">
        <li *ngFor="let type of software.software_types" class="sw-type-icon-small sw-type-icon-{{type}}"></li>
      </ul>
    </mat-card>
  </mat-grid-tile>
</mat-grid-list>
